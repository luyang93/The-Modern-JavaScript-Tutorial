<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
  let arr = ['I', 'study', 'JavaScript'];

  arr.splice(1, 1); // 从索引 1 开始删除 1 个元素
  console.log(arr); // ["I", "JavaScript"]
</script>
<script>
  let arr2 = ['I', 'study', 'JavaScript', 'right', 'now'];

  // 删除数组的前三项，并使用其他内容代替它们
  arr2.splice(0, 3, 'Let\'s', 'dance');

  console.log(arr2); // 现在 ["Let's", "dance", "right", "now"]
</script>
<script>
  let arr3 = ['I', 'study', 'JavaScript', 'right', 'now'];

  // 删除前两个元素
  let removed = arr3.splice(0, 2);

  console.log(removed); // "I", "study" <-- 被从数组中删除了的元素
</script>
<script>
  let arr4 = ['I', 'study', 'JavaScript'];

  // 从索引 2 开始
  // 删除 0 个元素
  // 然后插入 "complex" 和 "language"
  arr4.splice(2, 0, 'complex', 'language');

  console.log(arr4); // "I", "study", "complex", "language", "JavaScript"
</script>
<script>
  let arr5 = [1, 2, 5];

  // 从索引 -1（尾端前一位）
  // 删除 0 个元素，
  // 然后插入 3 和 4
  arr5.splice(-1, 0, 3, 4);

  console.log(arr5); // 1,2,3,4,5
</script>
<script>
  let arr6 = ['t', 'e', 's', 't'];

  console.log(arr6.slice(1, 3)); // e,s（复制从位置 1 到位置 3 的元素）

  console.log(arr6.slice(-2)); // s,t（复制从位置 -2 到尾端的元素）
</script>
<script>
  let arr7 = [1, 2];

  // create an array from: arr and [3,4]
  console.log(arr7.concat([3, 4])); // 1,2,3,4

  // create an array from: arr and [3,4] and [5,6]
  console.log(arr7.concat([3, 4], [5, 6])); // 1,2,3,4,5,6

  // create an array from: arr and [3,4], then add values 5 and 6
  console.log(arr7.concat([3, 4], 5, 6)); // 1,2,3,4,5,6
</script>
<script>
  let arr8 = [1, 2];

  let arrayLike = {
    0: 'something',
    length: 1,
  };

  console.log(arr8.concat(arrayLike)); // 1,2,[object Object]
</script>
<script>
  let arr9 = [1, 2];

  let arrayLike1 = {
    0: 'something',
    1: 'else',
    [Symbol.isConcatSpreadable]: true,
    length: 2,
  };

  console.log(arr9.concat(arrayLike1)); // 1,2,something,else
</script>
<script>
  ['Bilbo', 'Gandalf', 'Nazgul'].forEach(console.log);
  ['Bilbo', 'Gandalf', 'Nazgul'].forEach((item, index, array) => {
    console.log(`${item} is at index ${index} in ${array}`);
  });
</script>
<script>
  let arr10 = [1, 0, false, NaN];

  console.log(arr10.indexOf(0)); // 1
  console.log(arr10.indexOf(false)); // 2
  console.log(arr10.indexOf(null)); // -1
  console.log(arr10.lastIndexOf(false));
  console.log(arr10.includes(1)); // true
  console.log(arr10.indexOf(NaN)); // -1（应该为 0，但是严格相等 === equality 对 NaN 无效）
  console.log(arr10.includes(NaN));// true（这个结果是对的）
</script>
<script>
  let users = [
    {id: 1, name: 'John'},
    {id: 2, name: 'Pete'},
    {id: 3, name: 'Mary'},
  ];

  let user = users.find(item => item.id == 1);

  console.log(user.name); // John
  console.log(users.find(item => item.id == 5));
  console.log(users.findIndex(item => item.id == 2));
  console.log(users.findIndex(item => item.id == 6));
</script>
<script>
  let users2 = [
    {id: 1, name: 'John'},
    {id: 2, name: 'Pete'},
    {id: 3, name: 'Mary'},
  ];

  // 返回前两个用户的数组
  let someUsers = users2.filter(item => item.id < 3);

  console.log(someUsers); // 2
  console.log(users2.filter(item => item.id > 10));
</script>
<script>
  let lengths = ['Bilbo', 'Gandalf', 'Nazgul'].map(item => item.length);
  console.log(lengths); // 5,7,6
</script>
<script>
  let arr11 = [1, 2, 15];

  // 该方法重新排列 arr 的内容
  arr11.sort();

  console.log(arr11);  // 1, 15, 2

  function compareNumeric(a, b) {
    if (a > b) return 1;
    if (a == b) return 0;
    if (a < b) return -1;
  }

  arr11.sort(compareNumeric);

  console.log(arr11);  // 1, 2, 15

  arr12 = [1, -2, 15, 2, 0, 8];
  console.log(
    arr12.sort(
      function(a, b) {
        console.log(a + ' <> ' + b);
        return a - b;
      },
    ),
  );
</script>
<script>
  let countries = ['Österreich', 'Andorra', 'Vietnam'];

  console.log(
    countries.sort(
      (a, b) => a > b ? 1 : -1,
    ),
  );
  console.log(
    countries.sort(
      (a, b) => a.localeCompare(b),
    ),
  );
</script>
<script>
  let arr13 = [1, 2, 3, 4, 5];
  arr13.reverse();

  console.log(arr13); // 5,4,3,2,1
</script>
<script>
  let names14 = 'Bilbo, Gandalf, Nazgul';

  let arr14 = names14.split(', ');

  for (let name of arr14) {
    console.log(`A message to ${name}.`); // A message to Bilbo（和其他名字）
  }
  console.log(names14.split(', ', 2));

  let str = 'test';
  console.log(str.split(''));

  let arr15 = ['Bilbo', 'Gandalf', 'Nazgul'];

  let str15 = arr15.join(';'); // 使用分号 ; 将数组粘合成字符串

  console.log(str15); // Bilbo;Gandalf;Nazgul
</script>
<script>
  let arr16 = [1, 2, 3, 4, 5];

  let result = arr16.reduce((sum, current) => sum + current, 0);

  console.log(result); // 15

  console.log(
    arr16.reduceRight(
      (sum, current) => sum + current,
      0,
    ),
  );
</script>
<script>
  console.log(typeof {}); // object
  console.log(typeof []); // same

  console.log(Array.isArray({})); // false

  console.log(Array.isArray([])); // true
</script>
<script>
  let army17 = {
    minAge: 18,
    maxAge: 27,
    canJoin(user) {
      return user.age >= this.minAge && user.age < this.maxAge;
    },
  };

  let users17 = [
    {age: 16},
    {age: 20},
    {age: 23},
    {age: 30},
  ];

  console.log(
    users17.filter(
      army17.canJoin,
      {
        'minAge': 18,
        'maxAge': 27,
      },
    ),
  );

  console.log(
    users17.filter(
      army17.canJoin,
      army17,
    ),
  );

  console.log(
    users17.filter(
      user => army17.canJoin(user),
    ),
  );
</script>
<script>
  function arraysEqual(arr1, arr2) {
    return arr1.length === arr2.length && arr1.every((value, index) => value === arr2[index]);
  }

  console.log(arraysEqual([1, 2], [1, 2]));

  console.log([1, 2, 3, 4, 5, 6, 7].some(
      (value) => value > 4,
    ),
  );
  console.log([1, 2, 3, 4, 5, 6, 7].every(
      (value) => value > 4,
    ),
  );
</script>
<script>
  console.log(
    [1, 2, 3, 4, 5, 6, 7].fill(4, 2, 5),
  );
  console.log(
    ['a', 'b', 'c', 'd', 'e', 'f', 'g'].copyWithin(
      1, 3, 5,
    ),
  );
  console.log(
    [
      [1, 2, 3],
      [4, 5, 6],
      [7, 8, 9],
    ].flat(1),
  );
  console.log(
    [1, 2, 3, 4, 5, 6, 7, 8].flatMap(x => [x * 2]),
  );
  console.log(
    Array.of(7),
    Array.of(1, 2, 3),
    Array(7),
    Array(1, 2, 3),
  );
</script>
<script>
  function camelize(str) {
    return str.split('-').map(
      (word, index) => index == 0 ? word : word[0].toUpperCase() + word.slice(1),
    ).join('');
  }

  console.log(camelize('background-color') == 'backgroundColor');
  console.log(camelize('list-style-image') == 'listStyleImage');
  console.log(camelize('-webkit-transition') == 'WebkitTransition');
</script>
<script>
  function filterRange(arr, a, b) {
    return arr.filter(
      item => (a <= item && item <= b),
    );
  }

  console.log(
    filterRange([5, 3, 8, 1], 1, 4),
  );
</script>
<script>
  function filterRangeInPlace(arr, a, b) {
    for (let i = 0; i < arr.length; i++) {
      let val = arr[i];

      if (val < a || val > b) {
        arr.splice(i, 1);
        i--;
      }
    }
  }

  arr17 = [5, 3, 8, 1];
  filterRangeInPlace(arr17, 1, 4);

  console.log(arr17);
</script>
<script>
  console.log(
    [5, 2, 1, -10, 8].sort(
      (a, b) => b - a,
    ),
  );
</script>
<script>
  function copySorted(arr) {
    return arr.slice().sort();
  }

  let arr18 = ['HTML', 'JavaScript', 'CSS'];

  console.log(copySorted(arr18));
  console.log(arr18);
</script>
<script>
  function Calculator() {

    this.methods = {
      '-': (a, b) => a - b,
      '+': (a, b) => a + b,
    };

    this.calculate = function(str) {

      let split = str.split(' '),
        a = +split[0],
        op = split[1],
        b = +split[2];

      if (!this.methods[op] || isNaN(a) || isNaN(b)) {
        return NaN;
      }

      return this.methods[op](a, b);
    };

    this.addMethod = function(name, func) {
      this.methods[name] = func;
    };
  }

  let powerCalc = new Calculator;
  powerCalc.addMethod('*', (a, b) => a * b);
  powerCalc.addMethod('/', (a, b) => a / b);
  powerCalc.addMethod('**', (a, b) => a ** b);

  let result1 = powerCalc.calculate('2 ** 3');
  console.log(result1); // 8
</script>
<script>
  let john = {name: 'John', age: 25};
  let pete = {name: 'Pete', age: 30};
  let mary = {name: 'Mary', age: 28};

  let users20 = [john, pete, mary];

  let names = users20.map(user => user.name);

  console.log(names);
</script>
<script>
  let john1 = {name: 'John', surname: 'Smith', id: 1};
  let pete1 = {name: 'Pete', surname: 'Hunt', id: 2};
  let mary1 = {name: 'Mary', surname: 'Key', id: 3};

  let users21 = [john1, pete1, mary1];

  let usersMapped = users21.map(
    user => (
      {
        'fullName': [user.name, user.surname].join(' '),
        'id': user.id,
      }
    ),
  );

  console.log(usersMapped[0].id); // 1
  console.log(usersMapped[0].fullName); // John Smith
</script>
<script>
  function sortByAge(arr) {
    arr.sort(
      (a, b) => a.age - b.age,
    );
  }

  let john2 = {name: 'John', age: 25};
  let pete2 = {name: 'Pete', age: 30};
  let mary2 = {name: 'Mary', age: 28};

  let arr22 = [pete2, john2, mary2];

  sortByAge(arr22);

  // 排序后的数组为：[john, mary, pete]
  console.log(arr22[0].name); // John
  console.log(arr22[1].name); // Mary
  console.log(arr22[2].name); // Pete
</script>
<script>
  function shuffle(arr) {
    arr.sort(
      () => Math.random() - 0.5,
    );
  }

  let arr23 = [1, 2, 3];
  shuffle(arr23);
  console.log(arr23);

  let count = {
    '123': 0,
    '132': 0,
    '213': 0,
    '231': 0,
    '321': 0,
    '312': 0,
  };

  for (let i = 0; i < 1000000; i++) {
    let array24 = [1, 2, 3];
    shuffle(array24);
    count[array24.join('')]++;
  }

  // 显示所有可能排列的出现次数
  for (let key in count) {
    console.log(`${key}: ${count[key]}`);
  }
</script>
<script>
  function shuffle2(array) {
    for (let i = array.length - 1; i > 0; i--) {
      let j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }

  // 所有可能排列的出现次数
  let count2 = {
    '123': 0,
    '132': 0,
    '213': 0,
    '231': 0,
    '321': 0,
    '312': 0,
  };

  for (let i = 0; i < 1000000; i++) {
    let array = [1, 2, 3];
    shuffle2(array);
    count2[array.join('')]++;
  }

  // 显示所有可能排列的出现次数
  for (let key in count2) {
    console.log(`${key}: ${count2[key]}`);
  }
</script>
<script>
  function getAverageAge(users) {
    return users.reduce((prev, user) => prev + user.age, 0) / users.length;
  }

  let john24 = {name: 'John', age: 25};
  let pete24 = {name: 'Pete', age: 30};
  let mary24 = {name: 'Mary', age: 29};

  let arr24 = [john, pete, mary];

  console.log(getAverageAge(arr24)); // 28
</script>
<script>
  function unique(arr) {
    let result = [];

    for (let str of arr) {
      if (!result.includes(str)) {
        result.push(str);
      }
    }

    return result;
  }

  let strings = [
    'Hare', 'Krishna', 'Hare', 'Krishna',
    'Krishna', 'Krishna', 'Hare', 'Hare', ':-O',
  ];

  console.log(unique(strings));
</script>
<script>
  function groupById(arr) {
    result = {};

    return arr.reduce(
      (obj, value) => {
        obj[value.id] = value;
        return obj;
      },
      {},
    );
  }

  let users25 = [
    {id: 'john', name: 'John Smith', age: 20},
    {id: 'ann', name: 'Ann Smith', age: 24},
    {id: 'pete', name: 'Pete Peterson', age: 31},
  ];

  let usersById = groupById(users25);
  console.log(usersById);
</script>
</body>
</html>
